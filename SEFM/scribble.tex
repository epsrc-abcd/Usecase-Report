\begin{tikzpicture}
	\draw[dotted, help lines]		(0,0) grid (12, 8);
	
	 \coordinate (A)	at (6, 8);

	\node[draw, circle, minimum size = 0.5cm]					(ScribbleIn)	at	(A)	{};
	\node[above = 0cm of ScribbleIn]													{Global Protocol};
	
	\node[draw, below = 0.5cm of ScribbleIn, minimum width = 2cm,minimum height = 0.5cm]	(Verify) {
		\scriptsize verify
	};


	\draw[->]		(ScribbleIn) -- (Verify);
	
	\node[draw, below = 0.5cm of Verify, minimum width = 2cm,minimum height = 0.5cm]		(Project) {
		\scriptsize project
	};
	
	\draw[->]		(Verify) -- (Project);

	
	\draw let
		\p1 = (Project.west),
		\p2 = (Project.east),
		\p3 = (Project.south)
	in
		coordinate	(A)	at (\x1, \y3)
		coordinate (B) at (\x2, \y3)
		node[draw, circle, below = 0.5cm of Project, minimum size = 0.5cm]		(Local)		{}
		node[draw, circle, below = 0.5cm of A, minimum size = 0.5cm]			(LocalL)	{}
		node[draw, circle, below = 0.5cm of B, minimum size = 0.5cm]			(LocalR)	{};
		
	\draw[->]		(Project) -- (Local);
	\draw[->]		(Project) -- (LocalL);
	\draw[->]		(Project) -- (LocalR);

	
	\node[draw, left = 1.5cm of LocalL, minimum width = 0.5cm,minimum height =3cm]	(Typecheck) {};
	\node[above = 0cm of Typecheck]	{\scriptsize typecheck};

	\node[draw, right = 1.5cm of LocalR, minimum width = 3cm,minimum height =3cm]	(Monitor) {};
	\node[above = 0cm of Monitor]	{\scriptsize monitor};

	\node[draw, circle, below = 3cm of Local, minimum size = 0.5cm]				(Code)	{};
	\node[draw, circle, below = 3cm of LocalL, minimum size = 0.5cm]			(CodeL)	{};
	\node[draw, circle, below = 3cm of LocalR, minimum size = 0.5cm]			(CodeR)	{};%
	\node[below = 0 of Code]	{\scriptsize Source Code};
	
	\node[draw, below = 3cm of Project, minimum width = 4cm,minimum height = 0.5cm]	(Inference) {
		\scriptsize inference
	};
	
	\draw let
		\p1	=	(Typecheck.north),
		\p2	=	(Typecheck.south),
		\p3	=	(Typecheck.east)
	in
		coordinate	(TCNortheast)	at	(\x3, \y1)
		coordinate	(TCSoutheast)	at	(\x3, \y2);
		
	\draw[->]	(LocalL)	--	(Typecheck.east);
	\draw[->]	(LocalL)	--	(TCNortheast);
	\draw[->]	(LocalL)	--	(TCSoutheast);


	\draw let
		\p1	=	(Monitor.north),
		\p2	=	(Monitor.south),
		\p3	=	(Monitor.west)
	in
		coordinate	(MNorthwest)	at	(\x3, \y1)
		coordinate	(MSouthwest)	at	(\x3, \y2);
	
	\draw[->]	(LocalR)	--	(Monitor.west);
	\draw[->]	(LocalR)	--	(MNorthwest);
	\draw[->]	(LocalR)	--	(MSouthwest);

	\draw let
		\p1	=	(LocalL),
		\p2	=	(LocalR),
		\p3	=	(Inference.north)
	in
		coordinate	(INorthLeft)	at	(\x1, \y3)
		coordinate	(INorthRight)	at	(\x2, \y3);
		
	
	\draw[->]	(Inference) -- (Local);
	\draw[->]	(INorthLeft) -- (LocalL);
	\draw[->]	(INorthRight) -- (LocalR);	
	
	\draw[->] let
		\p1	=	(CodeL),
		\p2	=	(Typecheck)
	in
		(CodeL)	--	(\x2, \y1)	--	(Typecheck);

	\draw[->] let
	\p1	=	(CodeR),
	\p2	=	(Monitor)
	in
	(CodeR)	--	(\x2, \y1)	--	(Monitor);
		
\end{tikzpicture}